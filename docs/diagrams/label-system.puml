@startuml Miyabi Label System (53 Labels)

!define STATE_COLOR #E8F5E9
!define AGENT_COLOR #FFF3E0
!define PRIORITY_COLOR #FFEBEE
!define TYPE_COLOR #E3F2FD
!define QUALITY_COLOR #F3E5F5

skinparam backgroundColor #FAFAFA
skinparam shadowing false
skinparam class {
    BorderColor #424242
    ArrowColor #757575
}

title Miyabi Label System\n10 Categories Ã— 53 Labels

package "STATE Labels (8)" <<STATE_COLOR>> {
    class "ğŸ“¥ state:pending" as pending
    class "ğŸ” state:analyzing" as analyzing
    class "ğŸ—ï¸ state:implementing" as implementing
    class "ğŸ‘€ state:reviewing" as reviewing
    class "âœ… state:done" as done
    class "ğŸ”´ state:blocked" as blocked
    class "ğŸ›‘ state:failed" as failed
    class "â¸ï¸ state:paused" as paused
}

package "AGENT Labels (6)" <<AGENT_COLOR>> {
    class "ğŸ¤– agent:coordinator" as coordinator
    class "ğŸ¤– agent:codegen" as codegen
    class "ğŸ¤– agent:review" as review
    class "ğŸ¤– agent:issue" as issue
    class "ğŸ¤– agent:pr" as pr
    class "ğŸ¤– agent:deployment" as deployment
}

package "PRIORITY Labels (4)" <<PRIORITY_COLOR>> {
    class "ğŸ”¥ priority:P0-Critical" as p0
    class "âš ï¸ priority:P1-High" as p1
    class "ğŸ“Š priority:P2-Medium" as p2
    class "ğŸ“ priority:P3-Low" as p3
}

package "TYPE Labels (7)" <<TYPE_COLOR>> {
    class "âœ¨ type:feature" as feature
    class "ğŸ› type:bug" as bug
    class "ğŸ“š type:docs" as docs
    class "ğŸ”§ type:refactor" as refactor
    class "ğŸ§ª type:test" as test
    class "ğŸ—ï¸ type:architecture" as architecture
    class "ğŸš€ type:deployment" as deployment_type
}

package "SEVERITY Labels (4)" <<PRIORITY_COLOR>> {
    class "ğŸš¨ severity:Sev.1-Critical" as sev1
    class "âš ï¸ severity:Sev.2-High" as sev2
    class "ğŸ“Š severity:Sev.3-Medium" as sev3
    class "ğŸ“ severity:Sev.4-Low" as sev4
}

package "PHASE Labels (5)" <<TYPE_COLOR>> {
    class "ğŸ¯ phase:planning" as planning
    class "ğŸ—ï¸ phase:implementation" as implementation
    class "ğŸ§ª phase:testing" as testing
    class "ğŸš€ phase:deployment" as deployment_phase
    class "ğŸ“Š phase:monitoring" as monitoring
}

package "SPECIAL Labels (7)" {
    class "ğŸ” security" as security
    class "ğŸ’° cost-watch" as cost
    class "ğŸ”„ dependencies" as dependencies
    class "ğŸ“ learning" as learning
    class "ğŸ”¬ experiment" as experiment
    class "ğŸš« wontfix" as wontfix
    class "ğŸ” duplicate" as duplicate
}

package "TRIGGER Labels (4)" <<AGENT_COLOR>> {
    class "ğŸ¤– trigger:agent-execute" as trigger_execute
    class "ğŸ“Š trigger:generate-report" as trigger_report
    class "ğŸš€ trigger:deploy-staging" as trigger_staging
    class "ğŸš€ trigger:deploy-production" as trigger_production
}

package "QUALITY Labels (4)" <<QUALITY_COLOR>> {
    class "â­ quality:excellent" as quality_excellent
    class "âœ… quality:good" as quality_good
    class "âš ï¸ quality:needs-improvement" as quality_needs
    class "ğŸ”´ quality:poor" as quality_poor
}

package "COMMUNITY Labels (4)" {
    class "ğŸ‘‹ good-first-issue" as first_issue
    class "ğŸ™ help-wanted" as help
    class "â“ question" as question
    class "ğŸ’¬ discussion" as discussion
}

' State transitions
pending --> analyzing : CoordinatorAgent
analyzing --> implementing : Agent assigned
implementing --> reviewing : PR created
reviewing --> done : Merge
implementing --> blocked : Error
reviewing --> failed : Quality < 80

' Agent triggers
trigger_execute --> coordinator : Launch
coordinator --> codegen : Assign
coordinator --> review : Assign
coordinator --> deployment : Assign

' Quality flow
reviewing --> quality_excellent : Score 90+
reviewing --> quality_good : Score 80-89
reviewing --> quality_needs : Score 60-79
reviewing --> quality_poor : Score < 60

' Severity escalation
sev1 --> security : If security issue
sev1 --> blocked : Escalate CISO

note bottom
  **Label System Features**:
  â€¢ Auto-assignment by IssueAgent
  â€¢ State-driven automation
  â€¢ Agent triggering
  â€¢ Quality scoring
  â€¢ Escalation routing

  **Total**: 53 Labels in 10 Categories
end note

@enduml
